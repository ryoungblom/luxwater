{"ast":null,"code":"var _jsxFileName = \"/Users/reuben/Desktop/work/lux/demo/product/eth/luxwater/src/components/addCountry.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport '../css/countries.css'; //import { COUNTRY_ABI, COUNTRY_ADDRESS } from '../config.js'\n\nimport { MARKETPLACE_ABI, MARKETPLACE_ADDRESS } from '../config.js';\n\nclass NewCountry extends Component {\n  async componentWillMount() {\n    await this.runWeb3();\n    await this.blockchain();\n    this.forceUpdate();\n  }\n\n  componentDidMount() {\n    document.title = \"react-web3\";\n  }\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      balance: '',\n      loading: true\n    };\n    this.addData = this.addData.bind(this);\n  }\n\n  async runWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. Please install MetaMask or similar!');\n    }\n  }\n\n  async blockchain() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const countryData = new web3.eth.Contract(COUNTRY_ABI, COUNTRY_ADDRESS);\n    this.setState({\n      countryData\n    });\n    const accounts = await web3.eth.getAccounts();\n    const balanceInWei = await web3.eth.getBalance(accounts[0]);\n    var balance = balanceInWei / 1000000000000000000;\n    var account = accounts[0];\n    this.setState({\n      account: account,\n      balance: balance,\n      loading: false\n    });\n  }\n\n  addData(name, total, perCap, epi, eh, ev) {\n    this.state.countryData.methods.addCountry(name, total, perCap, epi, eh, ev).send({\n      from: this.state.account\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, \" Add Data \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"sendForm\",\n      onSubmit: event => {\n        event.preventDefault();\n        this.addData(this.newName.value, this.newTotal.value, this.newPerCap.value, this.newEPI.value, this.newEH.value, this.newEV.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newName = input,\n      type: \"text\",\n      className: \"addCountryForm\",\n      placeholder: \"Name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newTotal = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"Total CO2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newPerCap = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"CO2 Per Capita\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newEPI = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"Env. Performance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newEH = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"Env. Health\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      ref: input => this.newEV = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"Eco Vitality\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      hidden: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"infoFlex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \" \\xA0 \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"acctInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, \"Account: \", this.state.account), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"acctInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, \"Balance: @\", this.state.balance), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, \" \\xA0 \")));\n  }\n\n}\n\nexport default NewCountry;","map":{"version":3,"sources":["/Users/reuben/Desktop/work/lux/demo/product/eth/luxwater/src/components/addCountry.js"],"names":["React","Component","Web3","MARKETPLACE_ABI","MARKETPLACE_ADDRESS","NewCountry","componentWillMount","runWeb3","blockchain","forceUpdate","componentDidMount","document","title","componentWillUnmount","clearInterval","interval","constructor","props","state","account","balance","loading","addData","bind","window","ethereum","web3","enable","currentProvider","alert","givenProvider","countryData","eth","Contract","COUNTRY_ABI","COUNTRY_ADDRESS","setState","accounts","getAccounts","balanceInWei","getBalance","name","total","perCap","epi","eh","ev","methods","addCountry","send","from","render","event","preventDefault","newName","value","newTotal","newPerCap","newEPI","newEH","newEV","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3'\nimport '../css/countries.css'\n\n//import { COUNTRY_ABI, COUNTRY_ADDRESS } from '../config.js'\nimport { MARKETPLACE_ABI, MARKETPLACE_ADDRESS } from '../config.js'\n\n\nclass NewCountry extends Component {\n\n  async componentWillMount() {\n    await this.runWeb3()\n    await this.blockchain()\n    this.forceUpdate()\n  }\n\n\n  componentDidMount(){\n    document.title = \"react-web3\"\n  }\n\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '',\n      balance: '',\n      loading: true\n    }\n\n    this.addData = this.addData.bind(this)\n  }\n\n  async runWeb3() {\n\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. Please install MetaMask or similar!')\n    }\n  }\n\n\n  async blockchain() {\n\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n\n\n    const countryData = new web3.eth.Contract(COUNTRY_ABI, COUNTRY_ADDRESS)\n\n    this.setState({ countryData })\n\n    const accounts = await web3.eth.getAccounts()\n    const balanceInWei = await web3.eth.getBalance(accounts[0])\n    var balance = balanceInWei/1000000000000000000\n    var account = accounts[0]\n\n    this.setState({ account: account, balance: balance, loading: false })\n  }\n\n\n   addData(name, total, perCap, epi, eh, ev) {\n\n     this.state.countryData.methods.addCountry(name, total, perCap, epi, eh, ev).send({ from: this.state.account })\n   }\n\n\n  render() {\n    return (\n\n      <div className = \"mainForm\">\n\n        <hr />\n\n        <h1> Add Data </h1>\n\n        <div className = \"formDiv\">\n\n          <form className = \"sendForm\" onSubmit={(event) => {\n            event.preventDefault()\n            this.addData(this.newName.value, this.newTotal.value, this.newPerCap.value, this.newEPI.value, this.newEH.value, this.newEV.value)\n            }}>\n\n            <input ref={(input) => this.newName = input} type=\"text\" className=\"addCountryForm\" placeholder=\"Name\" required />\n            <input ref={(input) => this.newTotal = input} type=\"number\" className=\"addCountryForm\" placeholder=\"Total CO2\" />\n            <input ref={(input) => this.newPerCap = input} type=\"number\" className=\"addCountryForm\" placeholder=\"CO2 Per Capita\" />\n            <input ref={(input) => this.newEPI = input} type=\"number\" className=\"addCountryForm\" placeholder=\"Env. Performance\" />\n            <input ref={(input) => this.newEH = input} type=\"number\" className=\"addCountryForm\" placeholder=\"Env. Health\" />\n            <input ref={(input) => this.newEV = input} type=\"number\" className=\"addCountryForm\" placeholder=\"Eco Vitality\" />\n\n\n            <br />\n              <input type=\"submit\" hidden={false} />\n          </form>\n\n        </div>\n\n        <div className = \"infoFlex\">\n          <span> &nbsp; </span>\n          <span className=\"acctInfo\">Account: {this.state.account}</span>\n          <span className=\"acctInfo\">Balance: @{this.state.balance}</span>\n          <span> &nbsp; </span>\n        </div>\n\n      </div>\n\n    );\n  }\n}\n\nexport default NewCountry;\n"]},"metadata":{},"sourceType":"module"}