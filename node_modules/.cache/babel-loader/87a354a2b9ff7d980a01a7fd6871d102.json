{"ast":null,"code":"var _jsxFileName = \"/Users/reuben/Desktop/work/lux/demo/product/eth/luxwater/src/pages/home.js\";\nimport React, { Component } from 'react';\nimport logo from \"../assets/boilerplate/logo.svg\";\nimport '../css/home.css';\nimport Web3 from 'web3';\n\nclass Home extends Component {\n  async componentWillMount() {\n    await this.runWeb3();\n    await this.blockchain();\n    this.forceUpdate();\n  }\n\n  componentDidMount() {\n    document.title = \"Lux\";\n  }\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      balance: '',\n      web3: false,\n      loading: true\n    };\n  }\n\n  async isInstalled() {\n    if (typeof Web3 !== 'undefined') {\n      console.log('Web3 Provider is installed');\n    } else {\n      console.log('No Web3 Provider!');\n    }\n  }\n\n  async isLocked(web3) {\n    web3.eth.getAccounts(function (err, accounts) {\n      if (err != null) {\n        console.log(err);\n      } else if (accounts.length === 0) {\n        console.log('Web3 Provider is locked');\n      } else {\n        console.log('Web3 Provider is unlocked');\n      }\n    });\n  }\n\n  async runWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      this.setState({\n        web3: true\n      });\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n      this.setState({\n        web3: true\n      });\n    } else {\n      window.alert('Non-Ethereum browser detected. Please install an Ethereum provider!');\n    }\n  }\n\n  async blockchain() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    this.isInstalled();\n    this.isLocked(web3);\n    const accounts = await web3.eth.getAccounts();\n    const balanceInWei = await web3.eth.getBalance(accounts[0]);\n    var balance = balanceInWei / 1000000000000000000;\n    var account = accounts[0];\n    console.log(\"Account: \" + account);\n    console.log(\"Balance: \" + balance);\n    console.log(\"web3: \" + web3);\n    this.setState({\n      account: accounts[0],\n      balance: balance,\n      loading: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, this.state.web3 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, \"Welcome to \", /*#__PURE__*/React.createElement(\"code\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 26\n      }\n    }, \"Lux Water\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 48\n      }\n    }), \"A blockchain water rights marketplace\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, \"Lux is currently under development and in demo mode\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"App-link\",\n      href: \"https://github.com/ryoungblom/climateth\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, \"Source Code\")) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, \"Welcome to \", /*#__PURE__*/React.createElement(\"code\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 26\n      }\n    }, \"Climateth\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 49\n      }\n    }), \"An Extra-Jurisdictional Carbon Emissions Database.\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, \"It looks like you don't have an Ethereum provider...\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 67\n      }\n    }), \"Please install a web3 provider (or yours may be locked),\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 71\n      }\n    }), \"or use a dApp browser!\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"App-link\",\n      href: \"https://github.com/ryoungblom/climateth\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, \"Source Code\"))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/reuben/Desktop/work/lux/demo/product/eth/luxwater/src/pages/home.js"],"names":["React","Component","Web3","Home","componentWillMount","runWeb3","blockchain","forceUpdate","componentDidMount","document","title","componentWillUnmount","clearInterval","interval","constructor","props","state","account","balance","web3","loading","isInstalled","console","log","isLocked","eth","getAccounts","err","accounts","length","window","ethereum","setState","enable","currentProvider","alert","givenProvider","balanceInWei","getBalance","render","logo"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAO,iBAAP;AACA,OAAOC,IAAP,MAAiB,MAAjB;;AAGA,MAAMC,IAAN,SAAmBF,SAAnB,CAA6B;AAEH,QAAlBG,kBAAkB,GAAG;AACzB,UAAM,KAAKC,OAAL,EAAN;AACA,UAAM,KAAKC,UAAL,EAAN;AACA,SAAKC,WAAL;AACD;;AAGDC,EAAAA,iBAAiB,GAAE;AACjBC,IAAAA,QAAQ,CAACC,KAAT,GAAiB,KAAjB;AACD;;AAGyB,QAApBC,oBAAoB,GAAG;AAC3BC,IAAAA,aAAa,CAAC,KAAKC,QAAN,CAAb;AACD;;AAGDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,EADE;AAEXC,MAAAA,OAAO,EAAE,EAFE;AAGXC,MAAAA,IAAI,EAAE,KAHK;AAIXC,MAAAA,OAAO,EAAE;AAJE,KAAb;AAMD;;AAGgB,QAAXC,WAAW,GAAG;AACjB,QAAI,OAAOnB,IAAP,KAAgB,WAApB,EAAgC;AAC7BoB,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACF,KAFD,MAGI;AACDD,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACF;AACH;;AAEa,QAARC,QAAQ,CAACL,IAAD,EAAO;AAClBA,IAAAA,IAAI,CAACM,GAAL,CAASC,WAAT,CAAqB,UAASC,GAAT,EAAcC,QAAd,EAAuB;AACzC,UAAID,GAAG,IAAI,IAAX,EAAiB;AACdL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACF,OAFD,MAGK,IAAIC,QAAQ,CAACC,MAAT,KAAoB,CAAxB,EAA2B;AAC7BP,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACF,OAFI,MAGA;AACFD,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACF;AACH,KAVD;AAWF;;AAGY,QAAPlB,OAAO,GAAG;AAEd,QAAIyB,MAAM,CAACC,QAAX,EAAqB;AACnBD,MAAAA,MAAM,CAACX,IAAP,GAAc,IAAIjB,IAAJ,CAAS4B,MAAM,CAACC,QAAhB,CAAd;AACA,WAAKC,QAAL,CAAc;AAAEb,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,YAAMW,MAAM,CAACC,QAAP,CAAgBE,MAAhB,EAAN;AACD,KAJD,MAKK,IAAIH,MAAM,CAACX,IAAX,EAAiB;AACpBW,MAAAA,MAAM,CAACX,IAAP,GAAc,IAAIjB,IAAJ,CAAS4B,MAAM,CAACX,IAAP,CAAYe,eAArB,CAAd;AACA,WAAKF,QAAL,CAAc;AAAEb,QAAAA,IAAI,EAAE;AAAR,OAAd;AACD,KAHI,MAIA;AACHW,MAAAA,MAAM,CAACK,KAAP,CAAa,qEAAb;AACD;AACF;;AAGe,QAAV7B,UAAU,GAAG;AAEjB,UAAMa,IAAI,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACkC,aAAL,IAAsB,uBAA/B,CAAb;AAEA,SAAKf,WAAL;AACA,SAAKG,QAAL,CAAcL,IAAd;AAEA,UAAMS,QAAQ,GAAG,MAAMT,IAAI,CAACM,GAAL,CAASC,WAAT,EAAvB;AACA,UAAMW,YAAY,GAAG,MAAMlB,IAAI,CAACM,GAAL,CAASa,UAAT,CAAoBV,QAAQ,CAAC,CAAD,CAA5B,CAA3B;AACA,QAAIV,OAAO,GAAGmB,YAAY,GAAC,mBAA3B;AACA,QAAIpB,OAAO,GAAGW,QAAQ,CAAC,CAAD,CAAtB;AAEAN,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcN,OAA1B;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcL,OAA1B;AAEAI,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAWJ,IAAvB;AAEA,SAAKa,QAAL,CAAc;AAAEf,MAAAA,OAAO,EAAEW,QAAQ,CAAC,CAAD,CAAnB;AAAwBV,MAAAA,OAAO,EAAEA,OAAjC;AAA0CE,MAAAA,OAAO,EAAE;AAAnD,KAAd;AACD;;AAEDmB,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEC,KAAKvB,KAAL,CAAWG,IAAX,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADb,eACmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADnC,0CADF,eAKE;AAAK,MAAA,GAAG,EAAEqB,IAAV;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAqC,MAAA,GAAG,EAAC,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DANF,eASE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,IAAI,EAAC,yCAFP;AAGE,MAAA,MAAM,EAAC,QAHT;AAIE,MAAA,GAAG,EAAC,qBAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBATF,CADD,gBAsBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADb,oBACoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADpC,uDADF,eAKE;AAAK,MAAA,GAAG,EAAEA,IAAV;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAqC,MAAA,GAAG,EAAC,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4EACsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADtD,2EAE0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAF1D,2BANF,eAWE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,IAAI,EAAC,yCAFP;AAGE,MAAA,MAAM,EAAC,QAHT;AAIE,MAAA,GAAG,EAAC,qBAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAXF,CAxBF,CADF,CADF;AAqDD;;AAjJ0B;;AAoJ7B,eAAerC,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport logo from '../assets/boilerplate/logo.svg';\nimport '../css/home.css';\nimport Web3 from 'web3'\n\n\nclass Home extends Component {\n\n  async componentWillMount() {\n    await this.runWeb3()\n    await this.blockchain()\n    this.forceUpdate()\n  }\n\n\n  componentDidMount(){\n    document.title = \"Lux\"\n  }\n\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '',\n      balance: '',\n      web3: false,\n      loading: true\n    }\n  }\n\n\n  async isInstalled() {\n     if (typeof Web3 !== 'undefined'){\n        console.log('Web3 Provider is installed')\n     }\n     else{\n        console.log('No Web3 Provider!')\n     }\n  }\n\n  async isLocked(web3) {\n     web3.eth.getAccounts(function(err, accounts){\n        if (err != null) {\n           console.log(err)\n        }\n        else if (accounts.length === 0) {\n           console.log('Web3 Provider is locked')\n        }\n        else {\n           console.log('Web3 Provider is unlocked')\n        }\n     });\n  }\n\n\n  async runWeb3() {\n\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      this.setState({ web3: true })\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n      this.setState({ web3: true })\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. Please install an Ethereum provider!')\n    }\n  }\n\n\n  async blockchain() {\n\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n\n    this.isInstalled();\n    this.isLocked(web3);\n\n    const accounts = await web3.eth.getAccounts()\n    const balanceInWei = await web3.eth.getBalance(accounts[0])\n    var balance = balanceInWei/1000000000000000000\n    var account = accounts[0]\n\n    console.log(\"Account: \" + account)\n    console.log(\"Balance: \" + balance)\n\n    console.log(\"web3: \" + web3)\n\n    this.setState({ account: accounts[0], balance: balance, loading: false })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n\n        {this.state.web3 ?\n          <div>\n            <p>\n              Welcome to <code>Lux Water</code><br />\n              A blockchain water rights marketplace\n            </p>\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n            <p>\n              Lux is currently under development and in demo mode\n            </p>\n            <a\n              className=\"App-link\"\n              href=\"https://github.com/ryoungblom/climateth\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Source Code\n            </a>\n          </div>\n\n          :\n\n          <div>\n            <p>\n              Welcome to <code>Climateth</code> <br />\n              An Extra-Jurisdictional Carbon Emissions Database.\n            </p>\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n            <p>\n              It looks like you don't have an Ethereum provider...<br />\n              Please install a web3 provider (or yours may be locked),<br />\n              or use a dApp browser!\n            </p>\n            <a\n              className=\"App-link\"\n              href=\"https://github.com/ryoungblom/climateth\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Source Code\n            </a>\n          </div>\n        }\n\n        </header>\n\n      </div>\n\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}